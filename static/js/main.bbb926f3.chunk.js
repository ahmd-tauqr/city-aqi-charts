(this["webpackJsonpcity-aqi-charts"]=this["webpackJsonpcity-aqi-charts"]||[]).push([[0],{13:function(t,e,c){},16:function(t,e,c){},17:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c.n(n),i=c(8),o=c.n(i),r=(c(13),c(2)),s=c(5),l=c(4),j=c.n(l),d=c(0),u=function(){var t=Object(n.useState)([]),e=Object(s.a)(t,2),c=e[0],a=e[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),l=o[0],u=o[1],h=Object(n.useState)([]),b=Object(s.a)(h,2),O=b[0],f=b[1];Object(n.useEffect)((function(){var t={event:"city",data:{channel:"city_aqi_".concat("cityaqi")}},e=new WebSocket("ws://city-ws.herokuapp.com");return e.onopen=function(){e.send(JSON.stringify(t))},e.onmessage=function(t){var e=JSON.parse(t.data);console.log("response fetched: ",e);var c=y(e),n=Object(s.a)(c,1)[0];u(n[0]),a(n[1]),f(n[2])},e.onclose=function(){e.close()},function(){e.close()}}));var x,p=function(t){return Math.ceil(t)>=0&&Math.ceil(t)<=50?"good":Math.ceil(t)>=51&&Math.ceil(t)<=100?"satisfactory":Math.ceil(t)>=101&&Math.ceil(t)<=200?"moderate":Math.ceil(t)>=201&&Math.ceil(t)<=300?"poor":Math.ceil(t)>=301&&Math.ceil(t)<=400?"very-poor":Math.ceil(t)>=401&&Math.ceil(t)<=500?"severe":void 0},y=function(t){var e=Object(r.a)(l),n=Object(r.a)(c),i=Object(r.a)(O);return t.map((function(t){console.log("pair",t),console.log("current city data: ",e),console.log("city to search",t.city);var c=e.indexOf(t.city);return console.log("city index: ===>",c),-1===c?(console.log("not found"),console.log("add this data to current data"),e.push(t.city),n.push(t.aqi.toFixed(2)),i.push(j.a.now()),u((function(e){return[].concat(Object(r.a)(e),[t.city])})),a((function(e){return[].concat(Object(r.a)(e),[t.aqi.toFixed(2)])})),f((function(t){return[].concat(Object(r.a)(t),[j.a.now()])}))):-1!==c&&(console.log("found"),console.log("update aqi and time stamp for this city"),n[c]=t.aqi.toFixed(2),a(n),i[c]=j.a.now(),f(i)),[e,n,i]}))},m=function(t){return Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:Object(d.jsx)("th",{children:t})})})};return Object(d.jsx)("div",{className:"app-container",children:Object(d.jsxs)("div",{className:"aqiDataTable",children:[Object(d.jsxs)("table",{className:"serialCol",children:[m("No."),Object(d.jsx)("tbody",{children:(x=l,x&&x.map((function(t,e){return Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{children:[" ",e+1," "]})},e)})))})]}),Object(d.jsxs)("table",{className:"cityCol",children:[m("City"),Object(d.jsx)("tbody",{children:function(t){return t&&t.map((function(t,e){return Object(d.jsx)("tr",{className:p(t),children:Object(d.jsx)("td",{children:t})},e)}))}(l)})]}),Object(d.jsxs)("table",{className:"aqiCol",children:[m("AQI"),Object(d.jsx)("tbody",{children:function(t){return t&&t.map((function(t,e){return Object(d.jsx)("tr",{className:p(t),children:Object(d.jsxs)("td",{children:[" ",t," "]})},e)}))}(c)})]}),Object(d.jsxs)("table",{className:"timestampCol",children:[m("Last Updated"),Object(d.jsx)("tbody",{children:function(t){return t&&t.map((function(t,e){return Object(d.jsx)("tr",{children:Object(d.jsxs)("td",{children:[" ",j()(t).fromNow()," "]})},e)}))}(O)})]})]})})};var h=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h2",{children:"City AQI CHARTS"}),Object(d.jsx)(u,{})]})};c(16);o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.bbb926f3.chunk.js.map